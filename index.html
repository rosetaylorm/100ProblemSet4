<!DOCTYPE html>
<html>

<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<!--<script src="/03_03_07_2014.js"></script-->
<script>
var coordinates = [
  {lat:42.350702, lng:-71.107180},
  {lat:42.359043, lng:-71.093457},
  {lat:42.373454, lng:-71.118863}   
];
var map;
var overlay;
var context;
var persons = [];

function init(){
	var latlng = new google.maps.LatLng(42.3510577,-71.0890165);

	var myOptions = {
		zoom : 14, 
		center : latlng,
		mapTypeId : google.maps.MapTypeId.ROADMAP};

	map = new google.maps.Map(document.getElementById('map'), myOptions);
	
	//add an overlay
	overlay = new google.maps.OverlayView();
	overlay.draw = function(){};
	overlay.setMap(map);
}

function addCanvas(){
	var canvas = document.createElement('canvas');
	canvas.style.position = 'absolute';
	canvas.width = '640';
	canvas.height = '480';
	overlay.getPanes().overlayLayer.appendChild(canvas);

	//get canvas context
	context = canvas.getContext('2d');

	//create start/end for 100 persons
	for (var i = 0; i<100; i++){
		persons.push(createPerson());
	}
	//call timer
	timer();
}

function createPerson(){
	var start = {
		x : Math.floor(Math.random()*640),
		y : Math.floor(Math.random()*480)
	};

	var end = {
		x : Math.floor(Math.random()*640),
		y : Math.floor(Math.random()*480)
	};

	var fillStyle = 'rgba('+ Math.floor(Math.random()*255) + ','+ Math.floor(Math.random()*255) + ','+ Math.floor(Math.random()*255) + ', .5)';

	var currentPosition = function(){};
	
	return {
		start : start,
		end : end, 
		fillStyle : fillStyle, 
		currentPosition : currentPosition
	};
}

function timer(){
	drawCircle();
	setTimeout(timer, 100);
}

function drawCircle(){
	var x = 640*Math.random();
	var y = 480*Math.random();
	var r = 10;
	var red = Math.floor(255*Math.random());
	var green = Math.floor(255*Math.random());
	var blue = Math.floor(255*Math.random());
	var myStyle = 'rgba('+red+', '+green+', '+blue+', 0.4)';
	context.fillStyle = myStyle;
	context.beginPath();
	context.arc(x, y, r ,0, Math.PI*2, true);
	context.closePath();
	context.fill();
}

google.maps.event.addDomListener(window, 'load', init);

</script>

<div id = 'map' style = 'height: 480px; width: 640px'></div>

</html>